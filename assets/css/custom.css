@media (prefers-color-scheme: dark) {
  /* Global Dark Mode Styles
     -------------------------
     Sets overall background, text, link, and header colors,
     and applies a subtle image dimming effect.
  */
  body {
    background-color: #121212 !important;
    color: #e0e0e0 !important;
  }
  a {
    color: #90caf9 !important;
  }
  h1, h2, h3 {
    color: #ffffff !important;
  }
  img {
    filter: brightness(0.9) !important;  /* Dim images slightly */
  }
  
  /* Generic Code Block Styling (non-highlighted) - Tokyo Night Theme
     -----------------------------------------------
     Applies to basic <pre> and <code> blocks created by Markdown.
  */
  pre {
    background-color: #1e1e1e !important;
    color: #dcdcdc !important;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace !important;
    padding: 1em !important;
    border-radius: 6px !important;
    overflow-x: auto !important;
  }
  code {
    background-color: #1e1e1e !important;
    color: #dcdcdc !important;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace !important;
    padding: 0.2em 0.4em !important;
    border-radius: 4px !important;
  }
  
  /* Syntax-Highlighted Code Block Styling (Rouge) - Tokyo Night Theme
     ------------------------------------------------
     Styles code blocks generated by Rouge within a container (.highlight).
  */
  .highlight {
    background-color: #1a1b26 !important;  /* Deep navy blue background */
    border-radius: 6px !important;
    padding: 0.5em !important;
  }
  .highlight pre {
    background-color: #1a1b26 !important;
    color: #c0caf5 !important;  /* Soft blue text */
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    tab-size: 2;
    padding-left: 5px !important;  /* Added unit */
    margin: 0 !important;
  }
  .highlight code {
    background-color: transparent !important;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace !important;
    display: block !important;
    padding-left: 5px !important;  /* Added unit */
  }
  
  /* Rouge Token Styling - Tokyo Night Theme
     ---------------------
     Colors for specific syntax tokens. Adjust these to change the theme’s look.
  */
  .highlight .k { color: #bb9af7 !important; }   /* Keywords (lavender) */
  .highlight .s { color: #9ece6a !important; }   /* Strings (green) */
  .highlight .n { color: #7dcfff !important; }   /* Names/Variables (sky blue) */
  .highlight .c {
    color: #9aa5ce !important;                 /* Comments (dim blue-gray) */
    font-style: italic !important;
  }
  .highlight .o { color: #ff9e64 !important; }   /* Operators (orange) */
  .highlight .mi { color: #ff757f !important; }  /* Numbers (pinkish red) */
  .highlight .nt,
  .highlight .nc { color: #bb9af7 !important; }  /* Tag names/Selectors (lavender) */
  .highlight .na { color: #9ece6a !important; }  /* Attribute names (green) */
  
  /* Inline Code Styling for Normal Text
     -------------------------------------
     Applies to inline code elements (wrapped in backticks) within paragraphs, lists, and spans.
  */
  p code, li code, span code {
    background-color: #1f2335 !important;
    color: #c0caf5 !important;
    font-family: Consolas, Monaco, monospace !important;
    font-size: 0.95em !important;
    padding: 0.2em 0.4em !important;
    border-radius: 4px !important;
    white-space: nowrap !important;
  }
  
  /* Inline Code Styling for Headers
     ---------------------------------
     Reduces the font size so inline code inside header tags doesn’t appear oversized.
  */
  h1 code, h2 code, h3 code, h4 code, h5 code, h6 code {
    background-color: #1f2335 !important;
    color: #c0caf5 !important;
    font-family: Consolas, Monaco, monospace !important;
    font-size: 0.7em !important;
    padding: 0.15em 0.35em !important;
    border-radius: 4px !important;
    vertical-align: middle !important;
  }
}
